events:
  EVDAV:
    bizlogic:
      notification:
        type: "cel"
        cel: "{'out': [message]}"
    enrichment:
      notification:
        type: "composite"
        enrichers:
          - type: "fixed"
            inputs: []
            output: ["eventType"]
            value:
              eventCode: "EVDAV"
              eventDescription: "Accepted at depot"
          
          - type: "lookup"
            inputs: [["mailPiece", "mailPieceBarcode", "channelSegment", "productId"]]
            output: ["productCategory"]
            lookup:
              "100": "Tracked24"
              "101": "Tracked48"
              "109": "SpecialDelivery09"
              "113": "SpecialDelivery13"
          
          - type: "lookup"
            inputs: [["mailPiece", "mailPieceBarcode", "channelSegment", "destinationPostcodeDPS", "postcode"]]
            output: ["postcodeRegion"]
            lookup:
              "EC1A1BB": "London"
              "W1A0AX": "London"
              "M11AE": "Manchester"
              "B338TH": "Birmingham"
              "UB70BH": "London"
              "SW1A1AA": "London"
              "E14BH": "London"
              "G11AA": "Glasgow"
              "BT71NN": "Belfast"
              "L16XX": "Liverpool"
              "SE11ZZ": "London"
              "N16XY": "London"
              "NE10AA": "Newcastle"
              "TN12AB": "Kent"
              "GU11AA": "Guildford"
              "CF101BH": "Cardiff"
              "EH12AB": "Edinburgh"
              "AB101NN": "Aberdeen"
              "KA11BB": "Ayrshire"
              "DD11AA": "Dundee"

  EVIMC:
    bizlogic:
      tracking:
        type: "cel"
        cel: "{'out': [message]}"
    enrichment:
      tracking:
        type: "composite"
        enrichers:
          - type: "fixed"
            inputs: []
            output: ["eventType"]
            value:
              eventCode: "EVIMC"
              eventDescription: "In transit / sorting"
          
          - type: "lookup"
            inputs: [["mailPiece", "mailPieceBarcode", "channelSegment", "productId"]]
            output: ["productCategory"]
            lookup:
              "100": "Tracked24"
              "101": "Tracked48"
              "109": "SpecialDelivery09"
              "113": "SpecialDelivery13"
          
          - type: "lookup"
            inputs: [["manualScan", "RMGLocation", "siteId"]]
            output: ["sortingCenter"]
            lookup:
              "000001": "London Central MC"
              "000002": "Manchester MC"
              "000003": "Birmingham MC"
              "000175": "Regional Hub"

  EVGPD:
    bizlogic:
      notification:
        type: "cel"
        cel: "{'out': [message]}"
      tracking:
        type: "cel"
        cel: "{'out': [message]}"
    enrichment:
      notification:
        type: "composite"
        enrichers:
          - type: "fixed"
            inputs: []
            output: ["eventType"]
            value:
              eventCode: "EVGPD"
              eventDescription: "Out for delivery"
          
          - type: "lookup"
            inputs: [["mailPiece", "mailPieceBarcode", "channelSegment", "productId"]]
            output: ["productCategory"]
            lookup:
              "100": "Tracked24"
              "101": "Tracked48"
              "109": "SpecialDelivery09"
              "113": "SpecialDelivery13"
          
          - type: "lookup"
            inputs: [["mailPiece", "mailPieceBarcode", "channelSegment", "destinationPostcodeDPS", "postcode"]]
            output: ["deliveryOffice"]
            lookup:
              "EC1A1BB": "City of London DO"
              "W1A0AX": "West End DO"
              "M11AE": "Manchester Central DO"
              "B338TH": "Birmingham South DO"
              "UB70BH": "Uxbridge DO"
              "SW1A1AA": "Westminster DO"
              "E14BH": "Canary Wharf DO"
              "G11AA": "Glasgow Central DO"
              "BT71NN": "Belfast DO"
              "L16XX": "Liverpool DO"
              "SE11ZZ": "Southwark DO"
              "N16XY": "Islington DO"
              "NE10AA": "Newcastle DO"
              "TN12AB": "Tunbridge Wells DO"
              "GU11AA": "Guildford DO"
              "CF101BH": "Cardiff DO"
              "EH12AB": "Edinburgh DO"
              "AB101NN": "Aberdeen DO"
              "KA11BB": "Kilmarnock DO"
              "DD11AA": "Dundee DO"
      
      tracking:
        type: "composite"
        enrichers:
          - type: "fixed"
            inputs: []
            output: ["eventType"]
            value:
              eventCode: "EVGPD"
              eventDescription: "Out for delivery"

  ENKDN:
    bizlogic:
      notification:
        type: "cel"
        cel: "{'out': [message]}"
      tracking:
        type: "cel"
        cel: "{'out': [message]}"
      billing:
        type: "cel"
        cel: "{'out': [message]}"
    enrichment:
      notification:
        type: "composite"
        enrichers:
          - type: "fixed"
            inputs: []
            output: ["eventType"]
            value:
              eventCode: "ENKDN"
              eventDescription: "Delivered"
          
          - type: "lookup"
            inputs: [["mailPiece", "mailPieceBarcode", "channelSegment", "productId"]]
            output: ["productCategory"]
            lookup:
              "100": "Tracked24"
              "101": "Tracked48"
              "109": "SpecialDelivery09"
              "113": "SpecialDelivery13"
          
          - type: "lookup"
            inputs: [["mailPiece", "mailPieceBarcode", "channelSegment", "destinationPostcodeDPS", "postcode"]]
            output: ["deliveryLocation"]
            lookup:
              "EC1A1BB": "City of London"
              "W1A0AX": "West End"
              "M11AE": "Manchester"
              "B338TH": "Birmingham"
              "UB70BH": "Uxbridge"
              "SW1A1AA": "Westminster"
              "E14BH": "Canary Wharf"
              "G11AA": "Glasgow"
              "BT71NN": "Belfast"
              "L16XX": "Liverpool"
              "SE11ZZ": "Southwark"
              "N16XY": "Islington"
              "NE10AA": "Newcastle"
              "TN12AB": "Tunbridge Wells"
              "GU11AA": "Guildford"
              "CF101BH": "Cardiff"
              "EH12AB": "Edinburgh"
              "AB101NN": "Aberdeen"
              "KA11BB": "Kilmarnock"
              "DD11AA": "Dundee"
      
      tracking:
        type: "composite"
        enrichers:
          - type: "fixed"
            inputs: []
            output: ["eventType"]
            value:
              eventCode: "ENKDN"
              eventDescription: "Delivered"
      
      billing:
        type: "composite"
        enrichers:
          - type: "fixed"
            inputs: []
            output: ["billingType"]
            value:
              billingCode: "DELIVERY_COMPLETE"
          
          - type: "lookup"
            inputs: [["mailPiece", "mailPieceBarcode", "channelSegment", "productId"]]
            output: ["productCategory"]
            lookup:
              "100": "Tracked24"
              "101": "Tracked48"
              "109": "SpecialDelivery09"
              "113": "SpecialDelivery13"

