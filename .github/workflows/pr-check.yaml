# This pipeline is used to test if the maven build works as expected.

name: PR check - Maven Build
on:
  workflow_dispatch:
  # push:
  #   branches: 
  #   - main
  #   - develop

permissions:
  contents: read
  packages: write
  id-token: write

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: Set up Temurin JDK 21
        uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: '21'
          
      - name: Run unit and integration tests
        run: mvn -B verify

      - name: Build shared JAR
        run: |
          mvn clean package -DskipTests
